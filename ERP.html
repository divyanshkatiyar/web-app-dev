<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Student Management System</title>

<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #f4f6f9;
}

.container {
    display: flex;
}

.sidebar {
    width: 220px;
    height: 100vh;
    background: #1e1e2f;
    color: white;
    padding: 20px;
}

.sidebar h2 {
    text-align: center;
}

.sidebar ul {
    list-style: none;
    padding: 0;
}

.sidebar li {
    padding: 10px;
    margin: 10px 0;
    background: #2c2c3e;
    border-radius: 5px;
}

.main {
    flex: 1;
    padding: 20px;
}

.card {
    background: white;
    padding: 20px;
    margin-bottom: 20px;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

input, select {
    padding: 10px;
    margin: 5px 0;
    width: 100%;
}

button {
    padding: 10px;
    background: #007bff;
    color: white;
    border: none;
    margin-top: 10px;
    cursor: pointer;
    border-radius: 5px;
}

button:hover {
    background: #0056b3;
}

table {
    width: 100%;
    border-collapse: collapse;
}

th, td {
    padding: 10px;
    border-bottom: 1px solid #ddd;
    text-align: center;
}

img {
    border-radius: 50%;
}
</style>
</head>

<body>

<div class="container">

<div class="sidebar">
    <h2>SMS</h2>
    <ul>
        <li>Total Students: <span id="count">0</span></li>
    </ul>
</div>

<div class="main">

<div class="card">
    <h3>Add Student</h3>

    <input type="text" id="name" placeholder="Student Name">
    <input type="text" id="roll" placeholder="Roll Number">

    <select id="branch">
        <option value="">Select Branch</option>
        <option>CSE</option>
        <option>IT</option>
        <option>Civil</option>
        <option>Mechanical</option>
    </select>

    <input type="file" id="image">
    <button onclick="addStudent()">Add Student</button>
</div>

<div class="card">
    <h3>Student List</h3>

    <input type="text" id="search" placeholder="Search by name..." onkeyup="searchStudent()">

    <table>
        <thead>
            <tr>
                <th>Image</th>
                <th>Name</th>
                <th>Roll</th>
                <th>Branch</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody id="studentTable"></tbody>
    </table>
</div>

</div>
</div>

<script>
let students = JSON.parse(localStorage.getItem("students")) || [];

function saveToLocal() {
    localStorage.setItem("students", JSON.stringify(students));
}

function updateCount() {
    document.getElementById("count").innerText = students.length;
}

function addStudent() {
    const name = document.getElementById("name").value;
    const roll = document.getElementById("roll").value;
    const branch = document.getElementById("branch").value;
    const imageInput = document.getElementById("image");

    if (!name || !roll || !branch) {
        alert("Please fill all fields");
        return;
    }

    const reader = new FileReader();
    reader.onload = function () {
        const student = {
            name,
            roll,
            branch,
            image: reader.result
        };

        students.push(student);
        saveToLocal();
        displayStudents();
        clearForm();
    };

    if (imageInput.files[0]) {
        reader.readAsDataURL(imageInput.files[0]);
    }
}

function displayStudents(filtered = students) {
    const table = document.getElementById("studentTable");
    table.innerHTML = "";

    filtered.forEach((student, index) => {
        table.innerHTML += `
            <tr>
                <td><img src="${student.image}" width="50"></td>
                <td>${student.name}</td>
                <td>${student.roll}</td>
                <td>${student.branch}</td>
                <td><button onclick="deleteStudent(${index})">Delete</button></td>
            </tr>
        `;
    });

    updateCount();
}

function deleteStudent(index) {
    students.splice(index, 1);
    saveToLocal();
    displayStudents();
}

function searchStudent() {
    const search = document.getElementById("search").value.toLowerCase();
    const filtered = students.filter(s => 
        s.name.toLowerCase().includes(search)
    );
    displayStudents(filtered);
}

function clearForm() {
    document.getElementById("name").value = "";
    document.getElementById("roll").value = "";
    document.getElementById("branch").value = "";
    document.getElementById("image").value = "";
}

displayStudents();
</script>

</body>
</html>